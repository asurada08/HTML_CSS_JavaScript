<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>연습문제8</title>
  <style>
  td {
	padding-left : 10px;
	padding-right : 10px;
  }
  </style>
  <script>
  function calc(){
	let total=0;
	let qArr=document.getElementsByClassName("question");
	let aArr=document.getElementsByClassName("answer");
	for(i=0; i<qArr.length; i++){
		let q = qArr[i].innerHTML;
		let cans = Math.floor(eval(q));
		let uans = aArr[i].value;
		if(uans=="" || isNaN(uans)){
			total += 0;
			qArr[i].style.textDecoration = "line-through";
		}else if(parseInt(uans)==cans){
			total += 25;
			qArr[i].style.textDecoration = "none";
		}else{
			total += 0;
			qArr[i].style.textDecoration = "line-through";
		}
	}
	document.getElementById("score").innerHTML=total;
  }
  function makeExpression(){//body가 로딩 되었을때와 다시를 누르면 문제, 입력한 값, 채점 버튼 누른 후 생기는 모든것을 리셋하겠다
	let qArr=document.getElementsByClassName("question");//랜덤으로 만들 td(식) 자리
	let aArr=document.getElementsByClassName("answer");//td(답) 넣을 자리
	for(let i=0;i<qArr.length;i++){
		let num1 = Math.floor(Math.random()*20)+1;//첫번째 숫자 랜덤 설정(1~20까지)
		let num2 = Math.floor(Math.random()*20)+1;//두번째 숫자 랜덤 설정(1~20까지)
		let op = Math.floor(Math.random()*4);//중간에 연산자 넣을것 설정
		let operator="+";//사친연산만 하겠다
		switch(op){//이렇게
			case 0 : operator="+";break;
			case 1 : operator="-";break;
			case 2 : operator="*";break;
			case 3 : operator="/";break;
		}
		qArr[i].innerHTML = num1 + operator + num2;//td(식)이 들어갈 폼
		qArr[i].style.textDecoration = "none";
		aArr[i].value="";//다시를 누르는 거기 때문에 답 입력한 곳도 지우기
		document.getElementById("score").innerHTML = 0; //다시를 누르는거기 때문에 여기도 0으로
	}
  }
  </script>
 </head>
  <body onload="makeExpression()">
  <h3>산수 문제를 풀어 봅시다.</h3>
  자동으로 문제가 만들어집니다. 답 입력 후  채점 버튼을 누르세요.
  다시 버튼을 누르면 새로운 문제가 출력됩니다. 나누기 결과는 정수입니다.
  <div id="clock" onclick="controlClock()"></div>
  <hr>
  <form>
  <table>
	<tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
	<tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
	<tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
	<tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
	<tr><td><button type="button" onclick="calc()">채점</button></td>
	<td><span id="score">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<button type="button" onclick="makeExpression()">다시</button></td></tr>
  </table>
  </form>
 </body>
</html>
